<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <meta name="color-scheme" content="dark light">
    <title>Relative motion equations(HCW) simulator</title>
    <link rel="stylesheet" href="./src/styles.css">
</head>
<body class="m-0 p-0 font-sans bg-zinc-950 text-white overflow-hidden">
    <div id="container" class="w-screen h-screen relative flex flex-col">
        <div id="canvas-container" class="relative w-full h-screen bg-gradient-radial from-slate-900/95 to-black overflow-hidden touch-none">
            <!-- トップコントロールバー -->
            <div id="top-controls" class="absolute top-5 left-5 flex gap-3 items-center z-[1000]">
                <!-- ハンバーガーメニューボタン -->
                <button id="hamburger-menu" class="hamburger-button w-10 h-10 p-0 bg-black/70 border border-orange-500/30 rounded-lg cursor-pointer flex flex-col justify-center items-center gap-1 transition-all duration-300 hover:bg-orange-500/20 hover:border-orange-500 hover:shadow-[0_0_15px_rgba(255,127,80,0.3)]" onclick="toggleSidebar()">
                    <span class="hamburger-line w-6 h-0.5 bg-orange-500 transition-all duration-300 block"></span>
                    <span class="hamburger-line w-6 h-0.5 bg-orange-500 transition-all duration-300 block"></span>
                    <span class="hamburger-line w-6 h-0.5 bg-orange-500 transition-all duration-300 block"></span>
                </button>
                
                <!-- クイックアクションボタン -->
                <div class="quick-actions flex gap-2">
                    <button class="action-button flex items-center gap-1.5 px-3.5 py-2 bg-black/70 border border-orange-500/30 rounded-lg text-orange-500 text-[13px] font-semibold cursor-pointer transition-all duration-300 backdrop-blur-lg h-10 hover:bg-orange-500/20 hover:border-orange-500 hover:-translate-y-0.5 hover:shadow-[0_4px_15px_rgba(255,127,80,0.4)] active:translate-y-0" onclick="resetSimulation()" title="衛星を初期位置に戻す">
                        <span class="button-icon text-base drop-shadow-[0_0_3px_rgba(255,127,80,0.5)]">🛰️🔄</span>
                    </button>
                    <button class="action-button flex items-center gap-1.5 px-3.5 py-2 bg-black/70 border border-orange-500/30 rounded-lg text-orange-500 text-[13px] font-semibold cursor-pointer transition-all duration-300 backdrop-blur-lg h-10 hover:bg-orange-500/20 hover:border-orange-500 hover:-translate-y-0.5 hover:shadow-[0_4px_15px_rgba(255,127,80,0.4)] active:translate-y-0" onclick="resetView()" title="カメラを初期位置に戻す">
                        <span class="button-icon text-base drop-shadow-[0_0_3px_rgba(255,127,80,0.5)]">🎥🔄</span>
                    </button>
                </div>
            </div>
            
            <!-- 衛星配置パネル -->
            <div id="satellite-config-panel" class="absolute top-[70px] left-5 bg-gradient-to-br from-slate-900/95 to-slate-800/90 rounded-2xl border border-orange-500/25 backdrop-blur-xl shadow-[0_8px_32px_rgba(0,0,0,0.4),0_0_80px_rgba(255,127,80,0.1)] max-w-xs z-[100] overflow-hidden before:content-[''] before:absolute before:top-0 before:left-0 before:right-0 before:h-[1px] before:bg-gradient-to-r before:from-transparent before:via-orange-500/50 before:to-transparent before:animate-[shimmer_3s_ease-in-out_infinite]">
                <div class="panel-header px-3.5 py-2.5 cursor-pointer select-none flex justify-between items-center bg-orange-500/[0.08] border-b border-orange-500/15 transition-all duration-300 hover:bg-orange-500/15 hover:pl-4" onclick="toggleSatelliteConfig()">
                    <h4 class="section-title text-orange-400 text-[15px] font-bold m-0 border-none p-0 drop-shadow-[0_0_20px_rgba(255,127,80,0.5)] tracking-[0.5px]">🛰️ 衛星配置 </h4>
                    <span id="satellite-config-toggle" class="toggle-icon text-orange-400 text-xs transition-transform duration-300">▶</span>
                </div>
                <div id="satellite-config-content" class="panel-content p-3 overflow-hidden transition-all duration-300 flex flex-col gap-2.5" style="display: none;">
                        <div class="control-group flex items-center gap-2">
                            <label class="text-orange-400 font-semibold text-[13px] uppercase tracking-[0.5px] opacity-90 min-w-[70px]">配置:</label>
                            <select id="placementPattern" class="flex-1 px-2.5 py-1.5 bg-white/[0.06] border border-orange-500/20 rounded-lg text-white text-sm font-medium transition-all duration-300 cursor-pointer hover:bg-white/10 hover:border-orange-500/40 hover:-translate-y-[1px] hover:shadow-[0_4px_12px_rgba(255,127,80,0.15)] focus:bg-white/[0.12] focus:border-orange-500 focus:outline-none focus:shadow-[0_0_0_3px_rgba(255,127,80,0.2),0_4px_12px_rgba(255,127,80,0.25)]">
                                <option value="axis">軸上-速度0</option>
                                <option value="grid">格子-速度0</option>
                                <option value="random_position">ランダム-速度0</option>
                                <option value="random_position_velocity">ランダム</option>
                                <option value="random_periodic">ランダム-周期解</option>
                                <option value="periodic_orbit">楕円軌道</option>
                                <option value="circular_orbit">円軌道</option>
                                <option value="hexagonal_disk">円盤軌道（六角格子）</option>
                                <option value="concentric_disk">円盤軌道（同心リング）</option>
                                <option value="vbar_approach">V-bar軌道</option>
                                <option value="rbar_approach">R-bar軌道</option>
                            </select>
                        </div>
                        <div class="control-group flex items-center gap-2">
                            <label class="text-orange-400 font-semibold text-[13px] uppercase tracking-[0.5px] opacity-90 min-w-[70px]">数:</label>
                            <input type="number" id="satelliteCount" min="1" max="5" value="1" class="flex-1 px-2.5 py-1.5 bg-white/[0.06] border border-orange-500/20 rounded-lg text-white text-sm font-medium transition-all duration-300 hover:bg-white/10 hover:border-orange-500/40 hover:-translate-y-[1px] hover:shadow-[0_4px_12px_rgba(255,127,80,0.15)] focus:bg-white/[0.12] focus:border-orange-500 focus:outline-none focus:shadow-[0_0_0_3px_rgba(255,127,80,0.2),0_4px_12px_rgba(255,127,80,0.25)]">
                        </div>
                        <div id="diskPlacementControls" style="display: none;">
                            <div class="control-group flex items-center gap-2 mb-2">
                                <label class="text-orange-400 font-semibold text-[13px] uppercase tracking-[0.5px] opacity-90 min-w-[70px]">配置方式:</label>
                                <select id="diskPlacementMode" class="flex-1 px-2.5 py-1.5 bg-white/[0.06] border border-orange-500/20 rounded-lg text-white text-sm font-medium transition-all duration-300 cursor-pointer hover:bg-white/10 hover:border-orange-500/40 focus:bg-white/[0.12] focus:border-orange-500 focus:outline-none">
                                    <option value="radius">範囲指定</option>
                                    <option value="spacing">衛星間距離</option>
                                </select>
                            </div>
                        </div>
                        <div class="control-group flex items-center gap-2" id="orbitRadiusControl">
                            <label class="text-orange-400 font-semibold text-[13px] uppercase tracking-[0.5px] opacity-90 min-w-[70px]">範囲(m):</label>
                            <input type="number" id="orbitRadius" min="0.1" max="10000" step="0.1" value="10" class="flex-1 px-2.5 py-1.5 bg-white/[0.06] border border-orange-500/20 rounded-lg text-white text-sm font-medium transition-all duration-300 hover:bg-white/10 hover:border-orange-500/40 hover:-translate-y-[1px] hover:shadow-[0_4px_12px_rgba(255,127,80,0.15)] focus:bg-white/[0.12] focus:border-orange-500 focus:outline-none focus:shadow-[0_0_0_3px_rgba(255,127,80,0.2),0_4px_12px_rgba(255,127,80,0.25)]">
                        </div>
                        <div class="control-group flex items-center gap-2" id="satelliteSpacingControl" style="display: none;">
                            <label class="text-orange-400 font-semibold text-[13px] uppercase tracking-[0.5px] opacity-90 min-w-[70px]">間隔(m):</label>
                            <input type="number" id="satelliteSpacing" min="0.01" max="1000" step="0.01" value="1.0" class="flex-1 px-2.5 py-1.5 bg-white/[0.06] border border-orange-500/20 rounded-lg text-white text-sm font-medium transition-all duration-300 hover:bg-white/10 hover:border-orange-500/40 hover:-translate-y-[1px] hover:shadow-[0_4px_12px_rgba(255,127,80,0.15)] focus:bg-white/[0.12] focus:border-orange-500 focus:outline-none focus:shadow-[0_0_0_3px_rgba(255,127,80,0.2),0_4px_12px_rgba(255,127,80,0.25)]">
                        </div>
                    <div id="zAmplitudeControl" style="display: none;">
                        <div class="control-group flex items-center gap-3">
                            <label class="text-orange-400 font-semibold text-[13px] uppercase tracking-[0.5px] opacity-90">Z振幅:</label>
                            <input type="range" id="zAmplitude" min="-3" max="3" step="0.1" value="0" class="flex-1 h-1 bg-white/10 rounded-sm appearance-none cursor-pointer [&::-webkit-slider-thumb]:appearance-none [&::-webkit-slider-thumb]:w-3.5 [&::-webkit-slider-thumb]:h-3.5 [&::-webkit-slider-thumb]:bg-gradient-to-br [&::-webkit-slider-thumb]:from-orange-400 [&::-webkit-slider-thumb]:to-orange-600 [&::-webkit-slider-thumb]:rounded-full [&::-webkit-slider-thumb]:cursor-pointer [&::-webkit-slider-thumb]:shadow-[0_2px_6px_rgba(0,0,0,0.3),0_0_8px_rgba(255,127,80,0.4)] [&::-webkit-slider-thumb]:transition-all [&::-webkit-slider-thumb]:duration-200 [&::-webkit-slider-thumb]:hover:scale-125 [&::-webkit-slider-thumb]:hover:shadow-[0_2px_10px_rgba(0,0,0,0.4),0_0_16px_rgba(255,127,80,0.6)]">
                            <span id="zAmplitudeValue" class="inline-block min-w-[40px] text-center font-semibold text-orange-400 font-mono text-sm px-2 py-1 bg-orange-500/10 rounded-md ml-2">0.0</span>A
                        </div>
                    </div>
                    <div id="periodicParamsControl" style="display: none;">
                        <h5 class="text-orange-400 text-[13px] font-semibold m-0 mb-4 text-center opacity-90">楕円解パラメータ (A=範囲、B~F=A比)</h5>
                        <div class="periodic-params-grid flex flex-col gap-4 mt-3">
                            <div class="param-item flex items-center gap-3">
                                <label class="text-xs text-orange-400 font-semibold min-w-[50px]">B/A:</label>
                                <input type="range" id="paramB" min="-3" max="3" step="0.1" value="1" class="flex-1 h-1 bg-white/10 rounded-sm appearance-none cursor-pointer [&::-webkit-slider-thumb]:appearance-none [&::-webkit-slider-thumb]:w-3.5 [&::-webkit-slider-thumb]:h-3.5 [&::-webkit-slider-thumb]:bg-gradient-to-br [&::-webkit-slider-thumb]:from-orange-400 [&::-webkit-slider-thumb]:to-orange-600 [&::-webkit-slider-thumb]:rounded-full [&::-webkit-slider-thumb]:cursor-pointer [&::-webkit-slider-thumb]:shadow-[0_2px_6px_rgba(0,0,0,0.3),0_0_8px_rgba(255,127,80,0.4)] [&::-webkit-slider-thumb]:transition-all [&::-webkit-slider-thumb]:duration-200 [&::-webkit-slider-thumb]:hover:scale-125 [&::-webkit-slider-thumb]:hover:shadow-[0_2px_10px_rgba(0,0,0,0.4),0_0_16px_rgba(255,127,80,0.6)]">
                                <span id="paramBValue" class="text-[13px] text-orange-400 font-semibold text-center px-2 py-1 bg-orange-500/10 rounded-md font-mono min-w-[45px]">0.0</span>
                            </div>
                            <div class="param-item flex items-center gap-3">
                                <label class="text-xs text-orange-400 font-semibold min-w-[50px]">D/A:</label>
                                <input type="range" id="paramD" min="-3" max="3" step="0.1" value="0" class="flex-1 h-1 bg-white/10 rounded-sm appearance-none cursor-pointer [&::-webkit-slider-thumb]:appearance-none [&::-webkit-slider-thumb]:w-3.5 [&::-webkit-slider-thumb]:h-3.5 [&::-webkit-slider-thumb]:bg-gradient-to-br [&::-webkit-slider-thumb]:from-orange-400 [&::-webkit-slider-thumb]:to-orange-600 [&::-webkit-slider-thumb]:rounded-full [&::-webkit-slider-thumb]:cursor-pointer [&::-webkit-slider-thumb]:shadow-[0_2px_6px_rgba(0,0,0,0.3),0_0_8px_rgba(255,127,80,0.4)] [&::-webkit-slider-thumb]:transition-all [&::-webkit-slider-thumb]:duration-200 [&::-webkit-slider-thumb]:hover:scale-125 [&::-webkit-slider-thumb]:hover:shadow-[0_2px_10px_rgba(0,0,0,0.4),0_0_16px_rgba(255,127,80,0.6)]">
                                <span id="paramDValue" class="text-[13px] text-orange-400 font-semibold text-center px-2 py-1 bg-orange-500/10 rounded-md font-mono min-w-[45px]">0.0</span>
                            </div>
                            <div class="param-item flex items-center gap-3">
                                <label class="text-xs text-orange-400 font-semibold min-w-[50px]">E/A:</label>
                                <input type="range" id="paramE" min="-3" max="3" step="0.1" value="0" class="flex-1 h-1 bg-white/10 rounded-sm appearance-none cursor-pointer [&::-webkit-slider-thumb]:appearance-none [&::-webkit-slider-thumb]:w-3.5 [&::-webkit-slider-thumb]:h-3.5 [&::-webkit-slider-thumb]:bg-gradient-to-br [&::-webkit-slider-thumb]:from-orange-400 [&::-webkit-slider-thumb]:to-orange-600 [&::-webkit-slider-thumb]:rounded-full [&::-webkit-slider-thumb]:cursor-pointer [&::-webkit-slider-thumb]:shadow-[0_2px_6px_rgba(0,0,0,0.3),0_0_8px_rgba(255,127,80,0.4)] [&::-webkit-slider-thumb]:transition-all [&::-webkit-slider-thumb]:duration-200 [&::-webkit-slider-thumb]:hover:scale-125 [&::-webkit-slider-thumb]:hover:shadow-[0_2px_10px_rgba(0,0,0,0.4),0_0_16px_rgba(255,127,80,0.6)]">
                                <span id="paramEValue" class="text-[13px] text-orange-400 font-semibold text-center px-2 py-1 bg-orange-500/10 rounded-md font-mono min-w-[45px]">0.0</span>
                            </div>
                            <div class="param-item flex items-center gap-3">
                                <label class="text-xs text-orange-400 font-semibold min-w-[50px]">F/A:</label>
                                <input type="range" id="paramF" min="-3" max="3" step="0.1" value="0" class="flex-1 h-1 bg-white/10 rounded-sm appearance-none cursor-pointer [&::-webkit-slider-thumb]:appearance-none [&::-webkit-slider-thumb]:w-3.5 [&::-webkit-slider-thumb]:h-3.5 [&::-webkit-slider-thumb]:bg-gradient-to-br [&::-webkit-slider-thumb]:from-orange-400 [&::-webkit-slider-thumb]:to-orange-600 [&::-webkit-slider-thumb]:rounded-full [&::-webkit-slider-thumb]:cursor-pointer [&::-webkit-slider-thumb]:shadow-[0_2px_6px_rgba(0,0,0,0.3),0_0_8px_rgba(255,127,80,0.4)] [&::-webkit-slider-thumb]:transition-all [&::-webkit-slider-thumb]:duration-200 [&::-webkit-slider-thumb]:hover:scale-125 [&::-webkit-slider-thumb]:hover:shadow-[0_2px_10px_rgba(0,0,0,0.4),0_0_16px_rgba(255,127,80,0.6)]">
                                <span id="paramFValue" class="text-[13px] text-orange-400 font-semibold text-center px-2 py-1 bg-orange-500/10 rounded-md font-mono min-w-[45px]">0.0</span>
                            </div>
                        </div>
                        <div id="eccentricityDisplay" class="eccentricity-info mt-4 p-2 bg-orange-500/[0.08] border border-orange-500/20 rounded-lg flex items-center justify-center gap-2">
                            <span class="eccentricity-label text-orange-400 text-[13px] font-semibold uppercase tracking-[0.5px]">離心率 e:</span>
                            <span id="eccentricityValue" class="text-orange-400 text-base font-bold font-mono drop-shadow-[0_0_10px_rgba(255,127,80,0.5)]">0.00</span>
                        </div>
                    </div>
                    <div id="circularZDirectionControl" style="display: none;">
                        <div class="control-group flex items-center gap-3">
                            <input type="checkbox" id="circularZDirection" checked class="w-5 h-5 cursor-pointer accent-orange-500">
                            <label class="mb-0 text-[13px] normal-case tracking-normal">+Z方向</label>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- CSV再生制御パネル -->
            <div id="csv-playback-panel" class="absolute top-[70px] left-5 bg-gradient-to-br from-slate-900/95 to-slate-800/90 rounded-2xl border border-orange-500/25 backdrop-blur-xl shadow-[0_8px_32px_rgba(0,0,0,0.4),0_0_80px_rgba(255,127,80,0.1)] max-w-xs z-[100] overflow-hidden before:content-[''] before:absolute before:top-0 before:left-0 before:right-0 before:h-[1px] before:bg-gradient-to-r before:from-transparent before:via-orange-500/50 before:to-transparent before:animate-[shimmer_3s_ease-in-out_infinite]" style="display: none;">
                <div class="panel-header px-3.5 py-2.5 cursor-pointer select-none flex justify-between items-center bg-orange-500/[0.08] border-b border-orange-500/15 transition-all duration-300 hover:bg-orange-500/15 hover:pl-4" onclick="toggleCSVControls()">
                    <h4 class="section-title text-orange-400 text-[15px] font-bold m-0 border-none p-0 drop-shadow-[0_0_20px_rgba(255,127,80,0.5)] tracking-[0.5px]">📊 CSV再生モード</h4>
                    <span id="csv-controls-toggle" class="toggle-icon text-orange-400 text-xs transition-transform duration-300">▼</span>
                </div>
                <div id="csv-controls-content" class="panel-content p-3 overflow-hidden transition-all duration-300 flex flex-col gap-2.5">
                    <!-- Playback Controls -->
                    <div class="control-group flex items-center gap-2">
                        <button id="csvPlayPauseMain" class="px-3 py-1.5 bg-orange-500/20 border border-orange-500/30 rounded-lg text-orange-400 text-[13px] font-semibold cursor-pointer transition-all duration-300 hover:bg-orange-500/30 hover:border-orange-500 hover:text-white">▶ 再生</button>
                        <button id="csvStopMain" class="px-3 py-1.5 bg-orange-500/20 border border-orange-500/30 rounded-lg text-orange-400 text-[13px] font-semibold cursor-pointer transition-all duration-300 hover:bg-orange-500/30 hover:border-orange-500 hover:text-white">⏹ 停止</button>
                    </div>
                    
                    <!-- Time Control -->
                    <div class="control-group">
                        <input type="range" id="csvTimeSliderMain" min="0" max="100" step="0.1" value="0" class="w-full h-1 bg-white/10 rounded-sm appearance-none cursor-pointer [&::-webkit-slider-thumb]:appearance-none [&::-webkit-slider-thumb]:w-3.5 [&::-webkit-slider-thumb]:h-3.5 [&::-webkit-slider-thumb]:bg-gradient-to-br [&::-webkit-slider-thumb]:from-orange-400 [&::-webkit-slider-thumb]:to-orange-600 [&::-webkit-slider-thumb]:rounded-full [&::-webkit-slider-thumb]:cursor-pointer [&::-webkit-slider-thumb]:shadow-[0_2px_6px_rgba(0,0,0,0.3),0_0_8px_rgba(255,127,80,0.4)] [&::-webkit-slider-thumb]:transition-all [&::-webkit-slider-thumb]:duration-200 [&::-webkit-slider-thumb]:hover:scale-125 [&::-webkit-slider-thumb]:hover:shadow-[0_2px_10px_rgba(0,0,0,0.4),0_0_16px_rgba(255,127,80,0.6)]">
                        <div class="flex justify-between items-center mt-1">
                            <span class="text-[12px] text-orange-300/80 font-mono">
                                <span id="csvCurrentTimeMain">0</span>s / <span id="csvTotalTimeMain">0</span>s
                            </span>
                        </div>
                    </div>
                    
                    <!-- Loop Control -->
                    <div class="control-group flex items-center gap-2">
                        <input type="checkbox" id="csvLoopEnabledMain" checked class="w-4 h-4 cursor-pointer accent-orange-500">
                        <label for="csvLoopEnabledMain" class="text-[13px] text-orange-400">ループ再生</label>
                    </div>
                </div>
            </div>
            
            <!-- サイドバー -->
            <div id="sidebar" class="sidebar fixed top-0 left-[-400px] w-[380px] h-screen bg-gradient-to-b from-slate-900/98 to-slate-800/95 border-r border-orange-500/25 transition-[left] duration-300 ease-out z-[9999] overflow-y-auto backdrop-blur-[30px] shadow-[4px_0_24px_rgba(0,0,0,0.5),0_0_80px_rgba(255,127,80,0.05)] before:content-[''] before:absolute before:top-0 before:right-0 before:bottom-0 before:w-[1px] before:bg-gradient-to-b before:from-transparent before:via-orange-500/50 before:to-transparent before:animate-[pulseGlow_4s_ease-in-out_infinite]">
                <div class="sidebar-header px-5 py-3 bg-orange-500/[0.08] border-b border-orange-500/20 flex justify-between items-center relative overflow-hidden after:content-[''] after:absolute after:bottom-0 after:left-0 after:right-0 after:h-[1px] after:bg-gradient-to-r after:from-transparent after:via-orange-500/60 after:to-transparent after:animate-[shimmer_3s_ease-in-out_infinite]">
                    <h3 class="text-orange-400 m-0 text-xl font-bold drop-shadow-[0_0_20px_rgba(255,127,80,0.5)] tracking-[1px]">設定</h3>
                    <div class="header-buttons flex gap-2">
                        <button class="help-button w-9 h-9 p-0 bg-white/5 border border-orange-500/30 rounded-lg text-orange-400 text-lg font-bold cursor-pointer flex items-center justify-center transition-all duration-300 hover:scale-110 hover:bg-orange-500/20 hover:border-orange-500 hover:text-white hover:shadow-[0_0_20px_rgba(255,127,80,0.4)]" onclick="window.open('https://github.com/istellartech2/hcw-vis/blob/main/README.md', '_blank')" title="ヘルプ">?</button>
                        <button class="close-button w-9 h-9 p-0 bg-white/5 border border-orange-500/30 rounded-lg text-orange-400 text-xl cursor-pointer flex items-center justify-center transition-all duration-300 hover:rotate-90 hover:scale-110 hover:bg-orange-500/20 hover:border-orange-500 hover:text-white hover:shadow-[0_0_20px_rgba(255,127,80,0.4)]" onclick="toggleSidebar()">×</button>
                    </div>
                </div>
                <div class="sidebar-content p-3">
                    <!-- シミュレーション制御 -->
                    <div class="subsection mb-2 p-2 bg-gradient-to-br from-white/[0.04] to-white/[0.02] border border-orange-500/15 rounded-xl relative overflow-hidden transition-all duration-300 hover:from-white/[0.06] hover:to-white/[0.03] hover:border-orange-500/30 hover:-translate-y-[1px] hover:shadow-[0_4px_12px_rgba(255,127,80,0.1)] before:content-[''] before:absolute before:top-[-1px] before:left-[-1px] before:right-[-1px] before:h-[1px] before:bg-gradient-to-r before:from-transparent before:via-orange-500/40 before:to-transparent before:opacity-0 before:transition-opacity before:duration-300 hover:before:opacity-100">
                        <h5 class="subsection-title text-orange-400 text-xs font-bold m-0 mb-1 pb-1 border-b border-orange-500/20 uppercase tracking-[1px] flex items-center gap-2">⚡ シミュレーション</h5>
                        <div class="control-row">
                            <div class="control-group">
                                <input type="checkbox" id="j2Perturbation" class="w-4 h-4 cursor-pointer accent-orange-500">
                                <label for="j2Perturbation" class="text-orange-400 text-xs font-semibold uppercase tracking-[0.5px] opacity-90 cursor-pointer">J2摂動を考慮</label>
                            </div>
                        </div>
                        <div class="control-row">
                            <div class="control-group">
                                <label>推力:</label>
                                <input type="number" id="thrustAmount" min="0.0001" max="1" step="0.0001" value="0.001" style="width: 100px;">
                                <span class="text-[11px]">m/s</span>
                            </div>
                        </div>
                        <div class="control-row">
                            <div class="control-group">
                                <label>摂動:</label>
                                <input type="number" id="perturbationAmount" min="0.001" max="0.1" step="0.001" value="0.02" style="width: 100px;">
                                <span class="text-[11px]">m/s</span>
                            </div>
                        </div>
                        <div class="control-buttons flex flex-wrap gap-1.5 mt-1.5">
                            <button onclick="addPerturbation()" class="text-xs px-3 py-1.5">💥摂動</button>
                        </div>
                    </div>
            
                    <!-- 3D空間サブセクション -->
                    <div class="subsection mb-2 p-2 bg-gradient-to-br from-white/[0.04] to-white/[0.02] border border-orange-500/15 rounded-xl relative overflow-hidden transition-all duration-300 hover:from-white/[0.06] hover:to-white/[0.03] hover:border-orange-500/30 hover:-translate-y-[1px] hover:shadow-[0_4px_12px_rgba(255,127,80,0.1)] before:content-[''] before:absolute before:top-[-1px] before:left-[-1px] before:right-[-1px] before:h-[1px] before:bg-gradient-to-r before:from-transparent before:via-orange-500/40 before:to-transparent before:opacity-0 before:transition-opacity before:duration-300 hover:before:opacity-100">
                        <h5 class="subsection-title text-orange-400 text-xs font-bold m-0 mb-1 pb-1 border-b border-orange-500/20 uppercase tracking-[1px] flex items-center gap-2">🌌 3D空間表示</h5>
                        <div class="checkbox-grid grid grid-cols-3 gap-3 mb-3">
                            <div class="checkbox-item flex items-center gap-2">
                                <input type="checkbox" id="showGrid" checked class="w-4 h-4 cursor-pointer accent-orange-500">
                                <label for="showGrid" class="text-orange-400 text-xs font-semibold uppercase tracking-[0.5px] opacity-90 cursor-pointer min-w-0">グリッド</label>
                            </div>
                            <div class="checkbox-item flex items-center gap-2">
                                <input type="checkbox" id="showAxes" checked class="w-4 h-4 cursor-pointer accent-orange-500">
                                <label for="showAxes" class="text-orange-400 text-xs font-semibold uppercase tracking-[0.5px] opacity-90 cursor-pointer min-w-0">座標軸</label>
                            </div>
                            <div class="checkbox-item flex items-center gap-2">
                                <input type="checkbox" id="showLatLongGrid" checked class="w-4 h-4 cursor-pointer accent-orange-500">
                                <label for="showLatLongGrid" class="text-orange-400 text-xs font-semibold uppercase tracking-[0.5px] opacity-90 cursor-pointer min-w-0">緯度経度</label>
                            </div>
                            <div class="checkbox-item flex items-center gap-2">
                                <input type="checkbox" id="showEarth" checked class="w-4 h-4 cursor-pointer accent-orange-500">
                                <label for="showEarth" class="text-orange-400 text-xs font-semibold uppercase tracking-[0.5px] opacity-90 cursor-pointer min-w-0">地球</label>
                            </div>
                        </div>
                        <div class="control-row">
                            <div class="control-group">
                                <label>テクスチャ:</label>
                                <select id="earthTexture">
                                    <option value="earth00.webp">シンプル</option>
                                    <option value="earth01.webp">標準</option>
                                    <option value="earth03.webp">淡白</option>
                                    <option value="earth04.webp">ブルーマーブル</option>
                                    <option value="earth05_highres.webp">高解像度</option>
                                </select>
                            </div>
                        </div>
                    </div>
                    
                    <!-- 衛星サブセクション -->
                    <div class="subsection mb-2 p-2 bg-gradient-to-br from-white/[0.04] to-white/[0.02] border border-orange-500/15 rounded-xl relative overflow-hidden transition-all duration-300 hover:from-white/[0.06] hover:to-white/[0.03] hover:border-orange-500/30 hover:-translate-y-[1px] hover:shadow-[0_4px_12px_rgba(255,127,80,0.1)] before:content-[''] before:absolute before:top-[-1px] before:left-[-1px] before:right-[-1px] before:h-[1px] before:bg-gradient-to-r before:from-transparent before:via-orange-500/40 before:to-transparent before:opacity-0 before:transition-opacity before:duration-300 hover:before:opacity-100">
                        <h5 class="subsection-title text-orange-400 text-xs font-bold m-0 mb-1 pb-1 border-b border-orange-500/20 uppercase tracking-[1px] flex items-center gap-2">🛰️ 衛星表示</h5>
                        <div class="control-row">
                            <div class="control-group">
                                <label>サイズ:</label>
                                <input type="number" id="satelliteSize" min="0.1" max="100" step="0.1" value="0.8" style="width: 80px;">
                                <span style="font-size: 11px;">px</span>
                            </div>
                        </div>
                        <div class="control-row">
                            <div class="control-group">
                                <label>形状:</label>
                                <select id="satelliteShape">
                                    <option value="sphere">球体</option>
                                    <option value="cube">立方体</option>
                                    <option value="3dfile">3Dファイル読込</option>
                                </select>
                            </div>
                        </div>
                        <div class="control-row">
                            <div class="control-group">
                                <input type="checkbox" id="uniformSatelliteColor" class="w-4 h-4 cursor-pointer accent-orange-500">
                                <label for="uniformSatelliteColor">色を統一</label>
                                <input type="color" id="satelliteColor" value="#ffffff" class="w-12 h-8 border border-orange-500/30 rounded cursor-pointer transition-all duration-300 hover:border-orange-500 hover:scale-105 hover:shadow-[0_0_15px_rgba(255,127,80,0.3)]">
                            </div>
                        </div>
                        <div id="cubeRotationControls" style="display: none;">
                            <div class="control-group" style="flex-direction: column; align-items: stretch;">
                                <div style="display: flex; align-items: center; margin-bottom: 4px;">
                                    <label style="min-width: 70px;">R軸回転:</label>
                                    <input type="range" id="cubeRotationR" min="0" max="90" step="5" value="0" style="width: 120px; flex: 1;">
                                    <span id="cubeRotationRValue" style="min-width: 30px; text-align: right;">0°</span>
                                </div>
                                <div style="display: flex; align-items: center;">
                                    <label style="min-width: 70px;">S軸回転:</label>
                                    <input type="range" id="cubeRotationS" min="0" max="90" step="5" value="0" style="width: 120px; flex: 1;">
                                    <span id="cubeRotationSValue" style="min-width: 30px; text-align: right;">0°</span>
                                </div>
                            </div>
                        </div>
                        <div id="file3dControls" style="display: none;">
                            <div class="control-row">
                                <div class="control-group">
                                    <label>3Dファイル:</label>
                                    <input type="file" id="file3dInput" accept=".glb,.gltf,.stl" class="w-0 flex-1 min-w-0 px-2 py-1 bg-white/[0.06] border border-orange-500/20 rounded-md text-white text-xs font-medium transition-all duration-300 hover:bg-white/10 hover:border-orange-500/40 overflow-hidden file:mr-1 file:py-1 file:px-2 file:rounded file:border-0 file:text-xs file:font-semibold file:bg-orange-500/20 file:text-orange-300 hover:file:bg-orange-500/30">
                                </div>
                            </div>
                            <div class="rotation-controls">
                                <div class="control-row" style="margin-bottom: 4px;">
                                    <div class="control-group">
                                        <label style="min-width: 70px;">R軸回転:</label>
                                        <input type="range" id="file3dRotationR" min="-180" max="180" step="5" value="0" style="flex: 1;">
                                        <span id="file3dRotationRValue" style="min-width: 30px; text-align: right;">0°</span>
                                    </div>
                                </div>
                                <div class="control-row">
                                    <div class="control-group">
                                        <label style="min-width: 70px;">S軸回転:</label>
                                        <input type="range" id="file3dRotationS" min="-180" max="180" step="5" value="0" style="flex: 1;">
                                        <span id="file3dRotationSValue" style="min-width: 30px; text-align: right;">0°</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="control-row">
                            <div class="control-group">
                                <input type="checkbox" id="showTrails" checked>
                                <label>軌跡表示</label>
                            </div>
                        </div>
                        <div class="control-row">
                            <div class="control-group">
                                <label>軌跡長さ:</label>
                                <input type="range" id="trailLength" min="50" max="500" step="50" value="200">
                                <span id="trailLengthValue" style="font-size: 11px;">200</span>
                            </div>
                        </div>
                    </div>

                    <!-- CSV再生モード -->
                    <div class="sidebar-section mb-3 border border-orange-500/15 rounded-2xl overflow-hidden bg-gradient-to-br from-white/[0.03] to-white/[0.01] shadow-[0_4px_20px_rgba(0,0,0,0.2)] transition-all duration-300 hover:border-orange-500/30 hover:shadow-[0_8px_32px_rgba(0,0,0,0.3),0_0_40px_rgba(255,127,80,0.1)]">
                        <div class="sidebar-section-header px-3 py-2 bg-gradient-to-br from-orange-500/10 to-orange-500/[0.05] cursor-pointer select-none flex items-center gap-2 transition-all duration-300 relative overflow-hidden hover:from-orange-500/15 hover:to-orange-500/[0.08] hover:pl-4 before:content-[''] before:absolute before:top-0 before:left-[-100%] before:w-full before:h-full before:bg-gradient-to-r before:from-transparent before:via-orange-500/20 before:to-transparent before:transition-[left] before:duration-500 hover:before:left-[100%]" onclick="toggleSidebarSection('csv-playback')">
                            <span class="section-icon text-xl drop-shadow-[0_0_8px_rgba(255,127,80,0.3)]">📊</span>
                            <h4 class="section-title flex-1 text-orange-400 text-sm font-bold m-0 border-none p-0 drop-shadow-[0_0_15px_rgba(255,127,80,0.3)] tracking-[0.5px]">CSV再生モード</h4>
                            <span id="csv-playback-toggle" class="section-toggle text-orange-400 text-sm transition-transform duration-300 drop-shadow-[0_0_4px_rgba(255,127,80,0.3)]">▶</span>
                        </div>
                        <div id="csv-playback" class="sidebar-section-content collapsed">
                            <!-- CSV File Input -->
                            <div class="control-row">
                                <div class="control-group">
                                    <label>CSVファイル:</label>
                                    <input type="file" id="csvPlaybackInput" accept=".csv" class="w-0 flex-1 min-w-0 px-2 py-1 bg-white/[0.06] border border-orange-500/20 rounded-md text-white text-xs font-medium transition-all duration-300 hover:bg-white/10 hover:border-orange-500/40 overflow-hidden file:mr-1 file:py-1 file:px-2 file:rounded file:border-0 file:text-xs file:font-semibold file:bg-orange-500/20 file:text-orange-300 hover:file:bg-orange-500/30">
                                </div>
                            </div>
                            
                            <!-- File Status -->
                            <div id="csvFileStatus" class="control-row">
                                <div class="control-group">
                                    <div class="status-indicator p-2 rounded-lg text-xs bg-orange-500/[0.08] border border-orange-500/20 w-full text-center overflow-hidden">
                                        <span id="csvStatusText" class="text-orange-300/80 block truncate">ファイル未選択</span>
                                    </div>
                                </div>
                            </div>
                            
                            
                            <!-- Playback Controls -->
                            <div id="csvPlaybackControls" class="control-section hidden">
                                <h6 class="text-orange-400 text-[13px] font-semibold mb-2 border-b border-orange-500/20 pb-1">再生制御</h6>
                                
                                <!-- Play/Pause/Stop Controls -->
                                <div class="control-row">
                                    <div class="control-group">
                                        <label>再生制御:</label>
                                        <div class="flex gap-2">
                                            <button id="csvPlayPause" class="text-sm px-3 py-1.5 bg-orange-500/20 border border-orange-500/30 rounded text-orange-400 hover:bg-orange-500/30 transition-all">▶ 再生</button>
                                            <button id="csvStop" class="text-sm px-3 py-1.5 bg-orange-500/20 border border-orange-500/30 rounded text-orange-400 hover:bg-orange-500/30 transition-all">⏹ 停止</button>
                                        </div>
                                    </div>
                                </div>
                                
                                <!-- Time Slider -->
                                <div class="control-row">
                                    <div class="control-group">
                                        <label>時刻:</label>
                                        <input type="range" id="csvTimeSlider" min="0" max="100" step="0.1" value="0" class="flex-1 h-1 bg-white/10 rounded-sm appearance-none cursor-pointer [&::-webkit-slider-thumb]:appearance-none [&::-webkit-slider-thumb]:w-3.5 [&::-webkit-slider-thumb]:h-3.5 [&::-webkit-slider-thumb]:bg-gradient-to-br [&::-webkit-slider-thumb]:from-orange-400 [&::-webkit-slider-thumb]:to-orange-600 [&::-webkit-slider-thumb]:rounded-full [&::-webkit-slider-thumb]:cursor-pointer [&::-webkit-slider-thumb]:shadow-[0_2px_6px_rgba(0,0,0,0.3),0_0_8px_rgba(255,127,80,0.4)]">
                                    </div>
                                </div>
                                
                                <!-- Time Display -->
                                <div class="control-row">
                                    <div class="control-group">
                                        <label>時間:</label>
                                        <span class="text-[12px] text-orange-300/80 font-mono">
                                            <span id="csvCurrentTime">0.0</span>s / <span id="csvTotalTime">0.0</span>s
                                        </span>
                                    </div>
                                </div>
                                
                                <!-- Loop Control -->
                                <div class="control-row">
                                    <div class="control-group">
                                        <input type="checkbox" id="csvLoopEnabled" checked class="w-4 h-4 cursor-pointer accent-orange-500">
                                        <label for="csvLoopEnabled" class="text-[13px]">ループ再生</label>
                                    </div>
                                </div>
                                
                                <!-- Data Info -->
                                <div class="control-row">
                                    <div class="data-info p-2 bg-orange-500/[0.08] border border-orange-500/20 rounded-lg">
                                        <div class="text-[12px] text-orange-300/80">
                                            衛星数: <span id="csvSatelliteCount">0</span><br>
                                            データ点数: <span id="csvDataPoints">0</span><br>
                                            時間範囲: <span id="csvTimeRange">0.0-0.0s</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
            
                    <!-- 基準軌道 -->
                    <div class="sidebar-section mb-3 border border-orange-500/15 rounded-2xl overflow-hidden bg-gradient-to-br from-white/[0.03] to-white/[0.01] shadow-[0_4px_20px_rgba(0,0,0,0.2)] transition-all duration-300 hover:border-orange-500/30 hover:shadow-[0_8px_32px_rgba(0,0,0,0.3),0_0_40px_rgba(255,127,80,0.1)]">
                        <div class="sidebar-section-header px-3 py-2 bg-gradient-to-br from-orange-500/10 to-orange-500/[0.05] cursor-pointer select-none flex items-center gap-2 transition-all duration-300 relative overflow-hidden hover:from-orange-500/15 hover:to-orange-500/[0.08] hover:pl-4 before:content-[''] before:absolute before:top-0 before:left-[-100%] before:w-full before:h-full before:bg-gradient-to-r before:from-transparent before:via-orange-500/20 before:to-transparent before:transition-[left] before:duration-500 hover:before:left-[100%]" onclick="toggleSidebarSection('reference-orbit')">
                            <span class="section-icon text-xl drop-shadow-[0_0_8px_rgba(255,127,80,0.3)]">🌍</span>
                            <h4 class="section-title flex-1 text-orange-400 text-sm font-bold m-0 border-none p-0 drop-shadow-[0_0_15px_rgba(255,127,80,0.3)] tracking-[0.5px]">基準軌道</h4>
                            <span id="reference-orbit-toggle" class="section-toggle text-orange-400 text-sm transition-transform duration-300 drop-shadow-[0_0_4px_rgba(255,127,80,0.3)]">▶</span>
                        </div>
                        <div id="reference-orbit" class="sidebar-section-content collapsed">
                            <div class="control-row">
                                <div class="control-group">
                                    <label>高度(KM):</label>
                                    <input type="number" id="orbitAltitude" min="200" max="36000" step="50" value="500">
                                </div>
                            </div>
                            <div class="control-row">
                                <div class="control-group">
                                    <label>傾斜角(°):</label>
                                    <input type="number" id="inclination" min="0" max="180" step="0.1" value="51.6">
                                </div>
                            </div>
                            <div class="control-row">
                                <div class="control-group">
                                    <label>昇交点(°):</label>
                                    <input type="number" id="raan" min="0" max="360" step="1" value="0">
                                </div>
                            </div>
                            <div class="control-row">
                                <div class="control-group">
                                    <label>近地点(°):</label>
                                    <input type="number" id="argOfPerigee" min="0" max="360" step="1" value="0">
                                </div>
                            </div>
                            <div class="control-row">
                                <div class="control-group">
                                    <label>平均近点(°):</label>
                                    <input type="number" id="meanAnomaly" min="0" max="360" step="1" value="0">
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <canvas id="canvas" class="w-full h-full touch-none"></canvas>
            
            <!-- Loading Indicator -->
            <div id="loading-indicator" class="fixed inset-0 bg-black/50 backdrop-blur-sm z-[10000] hidden">
                <div class="absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2">
                    <div class="bg-gradient-to-br from-slate-900/95 to-slate-800/90 rounded-2xl border border-orange-500/30 p-8 backdrop-blur-xl shadow-[0_8px_32px_rgba(0,0,0,0.4),0_0_80px_rgba(255,127,80,0.1)] max-w-sm">
                        <div class="flex flex-col items-center gap-4">
                            <!-- Spinner -->
                            <div class="relative w-16 h-16">
                                <div class="absolute inset-0 border-4 border-orange-500/20 rounded-full"></div>
                                <div class="absolute inset-0 border-4 border-transparent border-t-orange-500 rounded-full animate-spin"></div>
                                <div class="absolute inset-2 border-2 border-transparent border-t-orange-400 rounded-full animate-spin animate-[spin_1.5s_linear_infinite_reverse]"></div>
                            </div>
                            
                            <!-- Text -->
                            <div class="text-center">
                                <h3 id="loading-title" class="text-orange-400 text-lg font-bold mb-2">読み込み中...</h3>
                                <p id="loading-message" class="text-orange-300/80 text-sm">ファイルを処理しています</p>
                            </div>
                            
                            <!-- Progress Bar -->
                            <div id="loading-progress-container" class="w-full hidden">
                                <div class="bg-orange-500/20 rounded-full h-2 overflow-hidden">
                                    <div id="loading-progress-bar" class="bg-gradient-to-r from-orange-500 to-orange-400 h-full transition-all duration-300 ease-out" style="width: 0%"></div>
                                </div>
                                <div class="flex justify-between text-xs text-orange-300/60 mt-1">
                                    <span id="loading-progress-text">0%</span>
                                    <span id="loading-file-size"></span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <div id="axes-info">
                <div class="axis-label" style="color: #ff6b6b">R軸: Radial (径方向 - 地心→衛星)</div>
                <div class="axis-label" style="color: #2ECC71">S軸: Along-track (軌道進行方向)</div>
                <div class="axis-label" style="color: #00BFFF">W軸: Cross-track (軌道面垂直方向)</div>
            </div>
            
            <!-- 折りたたみ可能な基準衛星情報パネル -->
            <div id="reference-satellite-panel" class="absolute top-[130px] right-5 z-[12] flex flex-col items-end">
                <button id="reference-satellite-toggle" class="panel-toggle flex items-center gap-1.5 px-3 py-2 bg-black/75 border border-orange-500/25 rounded-lg text-white/90 text-xs cursor-pointer transition-all duration-200 backdrop-blur-lg hover:bg-black/85 hover:border-orange-500/40" onclick="toggleReferenceSatelliteInfo()">
                    <span class="icon text-sm">📍 </span>
                    <span class="toggle-arrow text-[10px] transition-transform duration-200">▼</span>
                </button>
                <div id="reference-satellite-content" class="panel-content mt-0 p-2 bg-black/80 border border-orange-500/20 rounded-lg text-[11px] text-white/85 backdrop-blur-lg max-w-[360px] transition-all duration-300 overflow-hidden grid grid-cols-2 gap-3">
                    <div class="panel-column">
                        <div class="info-section">
                            <div class="panel-section-title">📍 位置情報</div>
                            <div id="geodetic-info" class="panel-info-content"></div>
                        </div>
                        <div class="info-section">
                            <div class="panel-section-title">🌍 ECI座標系</div>
                            <div id="eci-info" class="panel-info-content"></div>
                        </div>
                    </div>
                    <div class="panel-column">
                        <div class="info-section">
                            <div class="panel-section-title">🚀 軌道要素</div>
                            <div id="orbital-info" class="panel-info-content"></div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- 時間制御パネル -->
            <div id="time-controls-panel" class="absolute bottom-5 right-5 flex flex-col gap-2.5 items-end">
                <div id="time-scale-control" class="flex items-center gap-1.5 px-2 py-1 bg-black/80 rounded-lg border border-orange-500/30 backdrop-blur-lg transition-all duration-300 opacity-80 hover:bg-orange-500/15 hover:opacity-80 hover:shadow-[0_0_15px_rgba(255,127,80,0.3)]">
                    <span class="icon text-sm drop-shadow-[0_0_3px_rgba(255,127,80,0.4)]">⏱️</span>
                    <!-- Simulation speed control -->
                    <select id="timeScale" class="bg-transparent border-none text-orange-500 text-sm font-normal outline-none cursor-pointer px-1 py-0 font-mono">
                        <option value="1">1x</option>
                        <option value="5">5x</option>
                        <option value="10">10x</option>
                        <option value="30">30x</option>
                        <option value="60" selected>60x</option>
                        <option value="180">180x</option>
                        <option value="480">480x</option>
                        <option value="960">960x</option>
                    </select>
                    <!-- CSV playback speed control -->
                    <select id="csvPlaybackSpeedMain" class="bg-transparent border-none text-orange-500 text-sm font-normal outline-none cursor-pointer px-1 py-0 font-mono" style="display: none;">
                        <option value="1">1x</option>
                        <option value="5">5x</option>
                        <option value="10">10x</option>
                        <option value="30">30x</option>
                        <option value="60" selected>60x</option>
                        <option value="180">180x</option>
                        <option value="480">480x</option>
                        <option value="960">960x</option>
                    </select>
                </div>
                <div id="time-display" onclick="togglePause()" title="クリックで一時停止/再開" class="px-4 py-3 bg-black/70 rounded-lg text-base font-bold text-orange-500 border border-orange-500/30 drop-shadow-[0_0_10px_rgba(255,127,80,0.5)] font-mono tracking-[0.5px] cursor-pointer select-none transition-all duration-300 hover:bg-orange-500/20 hover:scale-105">
                    <span id="simulationTime">00分00秒</span>
                </div>
            </div>
            
        </div>
        
        

        

    </div>

    <script type="module" src="./src/main.ts"></script>
    <script>
        function toggleSidebar() {
            const sidebar = document.getElementById('sidebar');
            const hamburger = document.getElementById('hamburger-menu');
            sidebar.classList.toggle('open');
            hamburger.classList.toggle('active');
        }
        
        function toggleSidebarSection(sectionId) {
            const section = document.getElementById(sectionId);
            const toggle = document.getElementById(sectionId + '-toggle');
            section.classList.toggle('collapsed');
            toggle.textContent = section.classList.contains('collapsed') ? '▶' : '▼';
        }
        
        function toggleSatelliteConfig() {
            const content = document.getElementById('satellite-config-content');
            const toggle = document.getElementById('satellite-config-toggle');
            
            if (content.style.display === 'none' || !content.style.display) {
                content.style.display = 'flex';
                toggle.textContent = '▼';
            } else {
                content.style.display = 'none';
                toggle.textContent = '▶';
            }
        }
        
        // サイドバー外をクリックしたときに閉じる
        document.addEventListener('click', function(event) {
            const sidebar = document.getElementById('sidebar');
            const hamburger = document.getElementById('hamburger-menu');
            if (sidebar.classList.contains('open') && 
                !sidebar.contains(event.target) && 
                !hamburger.contains(event.target)) {
                sidebar.classList.remove('open');
                hamburger.classList.remove('active');
            }
        });
    </script>
</body>
</html>
