<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="color-scheme" content="dark light">
    <title>Hill's equations simulator</title>
    <link rel="stylesheet" href="/src/styles.css">
    <script type="importmap">
    {
      "imports": {
        "three": "/node_modules/three/build/three.module.js",
        "satellite.js": "/node_modules/satellite.js/dist/satellite.es.js"
      }
    }
    </script>
</head>
<body>
    <div id="container">
        <h1>üõ∞Ô∏è Hill's equations simulator</h1>
        
        <div id="canvas-container">
            <canvas id="canvas"></canvas>
            <div id="axes-info">
                <div class="axis-label" style="color: #ff6b6b">RËª∏: Radial (ÂæÑÊñπÂêë - Âú∞ÂøÉ‚ÜíË°õÊòü)</div>
                <div class="axis-label" style="color: #2ECC71">SËª∏: Along-track (ËªåÈÅìÈÄ≤Ë°åÊñπÂêë)</div>
                <div class="axis-label" style="color: #00BFFF">WËª∏: Cross-track (ËªåÈÅìÈù¢ÂûÇÁõ¥ÊñπÂêë)</div>
            </div>
            
            <!-- Êäò„Çä„Åü„Åü„ÅøÂèØËÉΩ„Å™Âü∫Ê∫ñË°õÊòüÊÉÖÂ†±„Éë„Éç„É´ -->
            <div id="reference-satellite-panel">
                <button id="reference-satellite-toggle" class="panel-toggle" onclick="toggleReferenceSatelliteInfo()">
                    <span class="icon">üõ∞Ô∏è</span>
                    <span class="toggle-arrow">‚ñº</span>
                </button>
                <div id="reference-satellite-content" class="panel-content">
                    <div class="panel-column">
                        <div class="info-section">
                            <div class="panel-section-title">üìç ‰ΩçÁΩÆÊÉÖÂ†±</div>
                            <div id="geodetic-info" class="panel-info-content"></div>
                        </div>
                        <div class="info-section">
                            <div class="panel-section-title">üåç ECIÂ∫ßÊ®ôÁ≥ª</div>
                            <div id="eci-info" class="panel-info-content"></div>
                        </div>
                    </div>
                    <div class="panel-column">
                        <div class="info-section">
                            <div class="panel-section-title">üöÄ ËªåÈÅìË¶ÅÁ¥†</div>
                            <div id="orbital-info" class="panel-info-content"></div>
                        </div>
                    </div>
                </div>
            </div>
            
            <div id="time-display">
                <span id="simulationTime">00ÂàÜ00Áßí</span>
            </div>
            <button id="fullscreen-toggle" onclick="toggleFullscreen()" title="ÂÖ®ÁîªÈù¢Ë°®Á§∫">‚õ∂</button>
        </div>
        
        <div id="controls">
            <div class="controls-grid">
                <!-- Ë°õÊòüÈÖçÁΩÆË®≠ÂÆö -->
                <div class="control-section">
                    <h4 class="section-title">üõ∞Ô∏è Ë°õÊòüÈÖçÁΩÆ</h4>
                    <div class="control-row compact">
                        <div class="control-group">
                            <label>ÈÖçÁΩÆ:</label>
                            <select id="placementPattern">
                                <option value="axis">Ëª∏‰∏ä-ÈÄüÂ∫¶0</option>
                                <option value="grid">Ê†ºÂ≠ê-ÈÄüÂ∫¶0</option>
                                <option value="random_position">„É©„É≥„ÉÄ„É†-ÈÄüÂ∫¶0</option>
                                <option value="random_position_velocity">„É©„É≥„ÉÄ„É†</option>
                                <option value="random_periodic">„É©„É≥„ÉÄ„É†-Âë®ÊúüËß£</option>
                                <option value="periodic_orbit">Ê•ïÂÜÜËªåÈÅì</option>
                                <option value="circular_orbit">ÂÜÜËªåÈÅì</option>
                                <option value="hexagonal_disk">ÂÜÜÁõ§ËªåÈÅì</option>
                                <option value="vbar_approach">V-barËªåÈÅì</option>
                                <option value="rbar_approach">R-barËªåÈÅì</option>
                            </select>
                        </div>
                        
                        <div class="control-group" id="satelliteCountControl">
                            <label>Êï∞:</label>
                            <input type="number" id="satelliteCount" min="1" max="5" value="1">
                        </div>
                    </div>
                    
                    <div class="control-row compact">
                        <div class="control-group">
                            <label>ÁØÑÂõ≤(m):</label>
                            <input type="number" id="orbitRadius" min="0.1" max="10000" step="0.1" value="10">
                        </div>
                    </div>
                    
                    <div class="control-row compact">
                        <div class="control-group" id="zAmplitudeControl" style="display: none;">
                            <label>ZÊåØÂπÖ:</label>
                            <input type="range" id="zAmplitude" min="-3" max="3" step="0.1" value="0">
                            <span id="zAmplitudeValue">0.0</span>A
                        </div>
                        <div class="control-group" id="periodicParamsControl" style="display: none;">
                            <h5 class="subsection-title">Ê•ïÂÜÜËß£„Éë„É©„É°„Éº„Çø (A=ÁØÑÂõ≤„ÄÅB~F=AÊØî)</h5>
                            <div class="periodic-params-grid">
                                <div class="param-item">
                                    <label>B/A:</label>
                                    <input type="range" id="paramB" min="-3" max="3" step="0.1" value="0">
                                    <span id="paramBValue">0.0</span>
                                </div>
                                <div class="param-item">
                                    <label>D/A:</label>
                                    <input type="range" id="paramD" min="-3" max="3" step="0.1" value="0">
                                    <span id="paramDValue">0.0</span>
                                </div>
                                <div class="param-item">
                                    <label>E/A:</label>
                                    <input type="range" id="paramE" min="-3" max="3" step="0.1" value="0">
                                    <span id="paramEValue">0.0</span>
                                </div>
                                <div class="param-item">
                                    <label>F/A:</label>
                                    <input type="range" id="paramF" min="-3" max="3" step="0.1" value="0">
                                    <span id="paramFValue">0.0</span>
                                </div>
                            </div>
                        </div>
                        <div class="control-group" id="circularZDirectionControl" style="display: none;">
                            <label>
                                <input type="checkbox" id="circularZDirection" checked>
                                +ZÊñπÂêë
                            </label>
                        </div>
                    </div>
                </div>
                
                <!-- „Ç∑„Éü„É•„É¨„Éº„Ç∑„Éß„É≥Âà∂Âæ° -->
                <div class="control-section">
                    <h4 class="section-title">‚è±Ô∏è Âà∂Âæ°</h4>
                    <div class="control-row compact">
                        <div class="control-group">
                            <label>ÂÄçÈÄü:</label>
                            <select id="timeScale">
                                <option value="1">1x</option>
                                <option value="2">2x</option>
                                <option value="5">5x</option>
                                <option value="10">10x</option>
                                <option value="20">20x</option>
                                <option value="50">50x</option>
                                <option value="100" selected>100x</option>
                                <option value="200">200x</option>
                                <option value="500">500x</option>
                                <option value="1000">1000x</option>
                            </select>
                        </div>
                    </div>
                    
                    <!-- Êé®ÂäõÂà∂Âæ°Ë®≠ÂÆö -->
                    <div class="control-row compact">
                        <div class="control-group">
                            <label>Êé®ÂäõÈáè:</label>
                            <input type="number" id="thrustAmount" min="0.0001" max="1" step="0.0001" value="0.001">
                            <span>m/s</span>
                        </div>
                    </div>
                    
                    <!-- ÊëÇÂãïË®≠ÂÆö -->
                    <div class="control-row compact">
                        <div class="control-group">
                            <label>ÊëÇÂãïÈáè:</label>
                            <input type="number" id="perturbationAmount" min="0.001" max="0.1" step="0.001" value="0.02">
                            <span>m/s</span>
                        </div>
                    </div>
                    
                    <div class="control-buttons compact">
                        <button onclick="resetSimulation()">üîÑË°õÊòüÂàùÊúüÂåñ</button>
                        <button onclick="togglePause()">‚èØÔ∏è‰∏ÄÊôÇÂÅúÊ≠¢</button>
                        <button onclick="addPerturbation()">üí•ÔºãÊëÇÂãï</button>
                        <button onclick="resetView()">üé¶Ë¶ñÁÇπ„É™„Çª„ÉÉ„Éà</button>
                    </div>
                </div>
                
                <!-- Ë°®Á§∫Ë®≠ÂÆö -->
                <div class="control-section">
                    <h4 class="section-title">üëÅÔ∏è Ë°®Á§∫</h4>
                    
                    <!-- 3DÁ©∫Èñì„ÅÆË°®Á§∫Ë¶ÅÁ¥† -->
                    <div class="control-subsection">
                        <h5 class="subsection-title">üåå 3DÁ©∫Èñì</h5>
                        <div class="control-row compact">
                            <div class="control-group">
                                <input type="checkbox" id="showGrid" checked>
                                <label>„Ç∞„É™„ÉÉ„Éâ</label>
                            </div>
                            <div class="control-group">
                                <input type="checkbox" id="showEarth" checked>
                                <label>Âú∞ÁêÉ</label>
                            </div>
                        </div>
                        
                        <div class="control-row compact">
                            <div class="control-group">
                                <label>Âú∞ÁêÉ„ÉÜ„ÇØ„Çπ„ÉÅ„É£:</label>
                                <select id="earthTexture">
                                    <option value="earth00.webp">„Ç∑„É≥„Éó„É´</option>
                                    <option value="earth01.webp">Ê®ôÊ∫ñ</option>
                                    <option value="earth03.webp">Ê∑°ÁôΩ</option>
                                    <option value="earth04.webp">„Éñ„É´„Éº„Éû„Éº„Éñ„É´</option>
                                </select>
                            </div>
                        </div>
                    </div>

                    <!-- Ë°õÊòü„ÅÆË°®Á§∫Ë®≠ÂÆö -->
                    <div class="control-subsection">
                        <h5 class="subsection-title">üõ∞Ô∏è Ë°õÊòü</h5>
                        <div class="control-row compact">
                            <div class="control-group">
                                <label>„Çµ„Ç§„Ç∫:</label>
                                <input type="number" id="satelliteSize" min="0.1" max="100" step="0.1" value="0.8">
                                <span>px</span>
                            </div>
                        </div>
                        
                        <div class="control-row compact">
                            <div class="control-group">
                                <label>ÂΩ¢Áä∂:</label>
                                <select id="satelliteShape">
                                    <option value="sphere">ÁêÉ‰Ωì</option>
                                    <option value="cube">Á´ãÊñπ‰Ωì</option>
                                </select>
                            </div>
                        </div>
                        
                        <div class="control-row compact">
                            <div class="control-group">
                                <input type="checkbox" id="uniformSatelliteColor">
                                <label>Ëâ≤„ÇíÁµ±‰∏Ä</label>
                            </div>
                            <div class="control-group">
                                <label>Ëâ≤:</label>
                                <input type="color" id="satelliteColor" value="#ffffff">
                            </div>
                        </div>
                    </div>

                    <!-- ËªåË∑°„ÅÆË°®Á§∫Ë®≠ÂÆö -->
                    <div class="control-subsection">
                        <h5 class="subsection-title">üìà ËªåË∑°</h5>
                        <div class="control-row compact">
                            <div class="control-group">
                                <input type="checkbox" id="showTrails" checked>
                                <label>ËªåË∑°„ÇíË°®Á§∫</label>
                            </div>
                        </div>
                        
                        <div class="control-row compact">
                            <div class="control-group">
                                <label>ËªåË∑°Èï∑:</label>
                                <input type="range" id="trailLength" min="50" max="500" step="50" value="200">
                                <span id="trailLengthValue">200</span>
                                <span>ÁÇπ</span>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Âü∫Ê∫ñËªåÈÅìË®≠ÂÆö -->
                <div class="control-section">
                    <h4 class="section-title collapsible" onclick="toggleSection('orbit-controls')">üåç Âü∫Ê∫ñËªåÈÅì <span class="toggle-icon">‚ñº</span></h4>
                    <div id="orbit-controls" class="collapsible-content" style="display: none;">
                    <div class="control-row compact">
                        <div class="control-group">
                            <label>ËªåÈÅìÂÇæÊñúËßí(¬∞):</label>
                            <input type="number" id="inclination" min="0" max="180" step="0.1" value="51.6">
                        </div>
                        
                        <div class="control-group">
                            <label>Êòá‰∫§ÁÇπÁµåÂ∫¶(¬∞):</label>
                            <input type="number" id="raan" min="0" max="360" step="0.1" value="0">
                        </div>
                    </div>
                    
                    <div class="control-row compact">
                        <div class="control-group">
                            <label>ËøëÂú∞ÁÇπÂºïÊï∞(¬∞):</label>
                            <input type="number" id="argOfPerigee" min="0" max="360" step="0.1" value="0">
                        </div>
                    </div>
                    
                    <div class="control-row compact">
                        <div class="control-group">
                            <label>Âπ≥ÂùáËøëÁÇπËßí(¬∞):</label>
                            <input type="number" id="meanAnomaly" min="0" max="360" step="0.1" value="0">
                        </div>
                        
                        <div class="control-group">
                            <label>È´òÂ∫¶(km):</label>
                            <input type="number" id="orbitAltitude" min="200" max="36000" step="50" value="500">
                        </div>
                    </div>
                    </div>
                </div>
            </div>
        </div>
        

        

    </div>

    <script type="module" src="/src/main.ts"></script>
</body>
</html>